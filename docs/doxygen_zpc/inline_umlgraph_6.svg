<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="542px" preserveAspectRatio="none" style="width:744px;height:542px;background:#FFFFFF;" version="1.1" viewBox="0 0 744 542" width="744px" zoomAndPan="magnify"><defs><filter height="300%" id="f6k5ri8h7r73c" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><rect fill="#FFFFE0" height="530.55" style="stroke:#A80036;stroke-width:1.0;" width="88" x="50" y="6"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="82" x="53" y="18.077">MQTT Broker</text><rect fill="#ADD8E6" height="530.55" style="stroke:#A80036;stroke-width:1.0;" width="539" x="199.5" y="6"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="26" x="456" y="18.077">ZPC</text><line style="stroke:#A80036;stroke-width:1.0;" x1="93.5" x2="93.5" y1="61.3999" y2="334.7001"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:1.0,4.0;" x1="93.5" x2="93.5" y1="334.7001" y2="375.9"/><line style="stroke:#A80036;stroke-width:1.0;" x1="93.5" x2="93.5" y1="375.9" y2="497.7501"/><line style="stroke:#A80036;stroke-width:1.0;" x1="290.5" x2="290.5" y1="61.3999" y2="334.7001"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:1.0,4.0;" x1="290.5" x2="290.5" y1="334.7001" y2="375.9"/><line style="stroke:#A80036;stroke-width:1.0;" x1="290.5" x2="290.5" y1="375.9" y2="497.7501"/><line style="stroke:#A80036;stroke-width:1.0;" x1="657.5" x2="657.5" y1="61.3999" y2="334.7001"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:1.0,4.0;" x1="657.5" x2="657.5" y1="334.7001" y2="375.9"/><line style="stroke:#A80036;stroke-width:1.0;" x1="657.5" x2="657.5" y1="375.9" y2="497.7501"/><rect fill="#FEFECE" filter="url(#f6k5ri8h7r73c)" height="30.7999" style="stroke:#A80036;stroke-width:1.5;" width="55" x="64.5" y="25.6"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="41" x="71.5" y="45.606">MQTT</text><rect fill="#FEFECE" filter="url(#f6k5ri8h7r73c)" height="30.7999" style="stroke:#A80036;stroke-width:1.5;" width="55" x="64.5" y="496.7501"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="41" x="71.5" y="516.756">MQTT</text><rect fill="#FEFECE" filter="url(#f6k5ri8h7r73c)" height="30.7999" style="stroke:#A80036;stroke-width:1.5;" width="170" x="203.5" y="25.6"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="156" x="210.5" y="45.606">UclNetworkManagement</text><rect fill="#FEFECE" filter="url(#f6k5ri8h7r73c)" height="30.7999" style="stroke:#A80036;stroke-width:1.5;" width="170" x="203.5" y="496.7501"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="156" x="210.5" y="516.756">UclNetworkManagement</text><rect fill="#FEFECE" filter="url(#f6k5ri8h7r73c)" height="30.7999" style="stroke:#A80036;stroke-width:1.5;" width="150" x="580.5" y="25.6"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="136" x="587.5" y="45.606">NetworkManagement</text><rect fill="#FEFECE" filter="url(#f6k5ri8h7r73c)" height="30.7999" style="stroke:#A80036;stroke-width:1.5;" width="150" x="580.5" y="496.7501"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="136" x="587.5" y="516.756">NetworkManagement</text><path d="M5,76.3999 L5,101.3999 L179,101.3999 L179,86.3999 L169,76.3999 L5,76.3999 " fill="#FBFB77" filter="url(#f6k5ri8h7r73c)" style="stroke:#A80036;stroke-width:1.0;"/><path d="M169,76.3999 L169,86.3999 L179,86.3999 L169,76.3999 " fill="#FBFB77" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="153" x="11" y="93.477">User trigger Remove Node</text><polygon fill="#A80036" points="278.5,181.25,288.5,185.25,278.5,189.25,282.5,185.25" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="94" x2="284.5" y1="185.25" y2="185.25"/><text fill="#000000" font-family="sans-serif" font-size="13" font-style="italic" lengthAdjust="spacing" textLength="135" x="101" y="129.3">ucl/by-unid/&lt;gw-node&gt;/</text><text fill="#000000" font-family="sans-serif" font-size="13" font-style="italic" lengthAdjust="spacing" textLength="107" x="101" y="146.85">ProtocolController/</text><text fill="#000000" font-family="sans-serif" font-size="13" font-style="italic" lengthAdjust="spacing" textLength="156" x="101" y="164.4">NetworkManagement/Write</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="162" x="101" y="179.727">{"State": "remove node", ...}</text><polygon fill="#A80036" points="645.5,210.85,655.5,214.85,645.5,218.85,649.5,214.85" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="290.5" x2="651.5" y1="214.85" y2="214.85"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="264" x="297.5" y="209.327">zwave_network_management_remove_node()</text><polygon fill="#A80036" points="301.5,240.45,291.5,244.45,301.5,248.45,297.5,244.45" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="295.5" x2="656.5" y1="244.45" y2="244.45"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="343" x="307.5" y="238.927">on_state_updated(NM_WAITING_FOR_NODE_REMOVAL)</text><polygon fill="#A80036" points="105,322.7001,95,326.7001,105,330.7001,101,326.7001" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="99" x2="289.5" y1="326.7001" y2="326.7001"/><text fill="#000000" font-family="sans-serif" font-size="13" font-style="italic" lengthAdjust="spacing" textLength="135" x="111" y="270.7501">ucl/by-unid/&lt;gw-node&gt;/</text><text fill="#000000" font-family="sans-serif" font-size="13" font-style="italic" lengthAdjust="spacing" textLength="107" x="111" y="288.3001">ProtocolController/</text><text fill="#000000" font-family="sans-serif" font-size="13" font-style="italic" lengthAdjust="spacing" textLength="122" x="111" y="305.8501">NetworkManagement</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="162" x="111" y="321.1771">{"State": "remove node", ...}</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="151" x="300.25" y="358.919">Waiting for node to be removed</text><polygon fill="#A80036" points="301.5,393.5,291.5,397.5,301.5,401.5,297.5,397.5" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="295.5" x2="656.5" y1="397.5" y2="397.5"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="167" x="307.5" y="391.977">on_state_updated(NM_IDLE)</text><polygon fill="#A80036" points="105,475.7501,95,479.7501,105,483.7501,101,479.7501" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="99" x2="289.5" y1="479.7501" y2="479.7501"/><text fill="#000000" font-family="sans-serif" font-size="13" font-style="italic" lengthAdjust="spacing" textLength="135" x="111" y="423.8">ucl/by-unid/&lt;gw-node&gt;/</text><text fill="#000000" font-family="sans-serif" font-size="13" font-style="italic" lengthAdjust="spacing" textLength="107" x="111" y="441.35">ProtocolController/</text><text fill="#000000" font-family="sans-serif" font-size="13" font-style="italic" lengthAdjust="spacing" textLength="122" x="111" y="458.9001">NetworkManagement</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="107" x="111" y="474.2271">{"State": "idle", ...}</text><!--MD5=[6a9b0dcaaf6088e92b8470def1eb4e52]
@startuml inline_umlgraph_6.svg
  box "MQTT Broker" #LightYellow
  participant MQTT
  end box
  box "ZPC" #LightBlue
  participant UclNetworkManagement
  participant NetworkManagement
  end box

  note over MQTT: User trigger Remove Node
  MQTT                  -> UclNetworkManagement : <i>ucl/by-unid/<gw-node>/</i>\n<i>ProtocolController/</i>\n<i>NetworkManagement/Write</i>\n{"State": "remove node", ...}
  UclNetworkManagement  -> NetworkManagement    : zwave_network_management_remove_node()
  NetworkManagement     -> UclNetworkManagement : on_state_updated(NM_WAITING_FOR_NODE_REMOVAL)
  UclNetworkManagement  -> MQTT                 : <i>ucl/by-unid/<gw-node>/</i>\n<i>ProtocolController/</i>\n<i>NetworkManagement</i>\n{"State": "remove node", ...}
  ... Waiting for node to be removed ...
  NetworkManagement     -> UclNetworkManagement : on_state_updated(NM_IDLE)
  UclNetworkManagement  -> MQTT                 : <i>ucl/by-unid/<gw-node>/</i>\n<i>ProtocolController/</i>\n<i>NetworkManagement</i>\n{"State": "idle", ...}
@enduml

PlantUML version 1.2022.0(Tue Jan 11 16:16:42 UTC 2022)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Default Encoding: ANSI_X3.4-1968
Language: en
Country: US
--></g></svg>