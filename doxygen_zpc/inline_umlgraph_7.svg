<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="563px" preserveAspectRatio="none" style="width:1403px;height:563px;background:#FFFFFF;" version="1.1" viewBox="0 0 1403 563" width="1403px" zoomAndPan="magnify"><defs><filter height="300%" id="f1vz58em2xs2ao" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><rect fill="#FFFFE0" height="551.414" style="stroke:#A80036;stroke-width:1.0;" width="92" x="72" y="6"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="86" x="75" y="19.897">MQTT Broker</text><rect fill="#ADD8E6" height="551.414" style="stroke:#A80036;stroke-width:1.0;" width="926.5" x="470.5" y="6"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="24" x="921.75" y="19.897">ZPC</text><line style="stroke:#A80036;stroke-width:1.0;" x1="118" x2="118" y1="65.7739" y2="346.8341"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:1.0,4.0;" x1="118" x2="118" y1="346.8341" y2="389.816"/><line style="stroke:#A80036;stroke-width:1.0;" x1="118" x2="118" y1="389.816" y2="516.3461"/><line style="stroke:#A80036;stroke-width:1.0;" x1="528.5" x2="528.5" y1="65.7739" y2="346.8341"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:1.0,4.0;" x1="528.5" x2="528.5" y1="346.8341" y2="389.816"/><line style="stroke:#A80036;stroke-width:1.0;" x1="528.5" x2="528.5" y1="389.816" y2="516.3461"/><line style="stroke:#A80036;stroke-width:1.0;" x1="900.5" x2="900.5" y1="65.7739" y2="346.8341"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:1.0,4.0;" x1="900.5" x2="900.5" y1="346.8341" y2="389.816"/><line style="stroke:#A80036;stroke-width:1.0;" x1="900.5" x2="900.5" y1="389.816" y2="516.3461"/><line style="stroke:#A80036;stroke-width:1.0;" x1="1311" x2="1311" y1="65.7739" y2="346.8341"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:1.0,4.0;" x1="1311" x2="1311" y1="346.8341" y2="389.816"/><line style="stroke:#A80036;stroke-width:1.0;" x1="1311" x2="1311" y1="389.816" y2="516.3461"/><rect fill="#FEFECE" filter="url(#f1vz58em2xs2ao)" height="33.0679" style="stroke:#A80036;stroke-width:1.5;" width="54" x="89" y="27.706"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="40" x="96" y="49.672">MQTT</text><rect fill="#FEFECE" filter="url(#f1vz58em2xs2ao)" height="33.0679" style="stroke:#A80036;stroke-width:1.5;" width="54" x="89" y="515.3461"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="40" x="96" y="537.312">MQTT</text><rect fill="#FEFECE" filter="url(#f1vz58em2xs2ao)" height="33.0679" style="stroke:#A80036;stroke-width:1.5;" width="105" x="474.5" y="27.706"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="91" x="481.5" y="49.672">UclNodeState</text><rect fill="#FEFECE" filter="url(#f1vz58em2xs2ao)" height="33.0679" style="stroke:#A80036;stroke-width:1.5;" width="105" x="474.5" y="515.3461"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="91" x="481.5" y="537.312">UclNodeState</text><rect fill="#FEFECE" filter="url(#f1vz58em2xs2ao)" height="33.0679" style="stroke:#A80036;stroke-width:1.5;" width="181" x="808.5" y="27.706"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="167" x="815.5" y="49.672">UclNetworkManagement</text><rect fill="#FEFECE" filter="url(#f1vz58em2xs2ao)" height="33.0679" style="stroke:#A80036;stroke-width:1.5;" width="181" x="808.5" y="515.3461"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="167" x="815.5" y="537.312">UclNetworkManagement</text><rect fill="#FEFECE" filter="url(#f1vz58em2xs2ao)" height="33.0679" style="stroke:#A80036;stroke-width:1.5;" width="160" x="1229" y="27.706"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="146" x="1236" y="49.672">NetworkManagement</text><rect fill="#FEFECE" filter="url(#f1vz58em2xs2ao)" height="33.0679" style="stroke:#A80036;stroke-width:1.5;" width="160" x="1229" y="515.3461"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="146" x="1236" y="537.312">NetworkManagement</text><path d="M5,80.7739 L5,107.7739 L228,107.7739 L228,90.7739 L218,80.7739 L5,80.7739 " fill="#FBFB77" filter="url(#f1vz58em2xs2ao)" style="stroke:#A80036;stroke-width:1.0;"/><path d="M218,80.7739 L218,90.7739 L228,90.7739 L218,80.7739 " fill="#FBFB77" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="202" x="11" y="99.6709">User trigger Remove Offline Node</text><polygon fill="#A80036" points="517,154.892,527,158.892,517,162.892,521,158.892" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="118" x2="523" y1="158.892" y2="158.892"/><text fill="#000000" font-family="sans-serif" font-size="13" font-style="italic" lengthAdjust="spacing" textLength="374" x="125" y="135.377">ucl/by-unid/&lt;offline-node-unid&gt;/State/Commands/OfflineRemove</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="5" x="125" y="153.083">"</text><polygon fill="#A80036" points="889,186.598,899,190.598,889,194.598,893,190.598" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="529" x2="895" y1="190.598" y2="190.598"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="348" x="536" y="184.789">ucl_network_management_remove_offline_node(node_id)</text><polygon fill="#A80036" points="1299,218.304,1309,222.304,1299,226.304,1303,222.304" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="901" x2="1305" y1="222.304" y2="222.304"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="326" x="908" y="216.495">zwave_network_management_remove_failed(node_id)</text><polygon fill="#A80036" points="912,250.01,902,254.01,912,258.01,908,254.01" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="906" x2="1310" y1="254.01" y2="254.01"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="386" x="918" y="248.201">on_state_updated(NM_WAITING_FOR_FAILED_NODE_REMOVAL)</text><polygon fill="#A80036" points="129,334.8341,119,338.8341,129,342.8341,125,338.8341" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="123" x2="900" y1="338.8341" y2="338.8341"/><text fill="#000000" font-family="sans-serif" font-size="13" font-style="italic" lengthAdjust="spacing" textLength="141" x="135" y="279.907">ucl/by-unid/&lt;gw-node&gt;/</text><text fill="#000000" font-family="sans-serif" font-size="13" font-style="italic" lengthAdjust="spacing" textLength="107" x="135" y="297.6131">ProtocolController/</text><text fill="#000000" font-family="sans-serif" font-size="13" font-style="italic" lengthAdjust="spacing" textLength="122" x="135" y="315.3191">NetworkManagement</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="162" x="135" y="333.0251">{"State": "remove node", ...}</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="210" x="609.5" y="372.593">Waiting for offfline node to be removed</text><polygon fill="#A80036" points="912,409.522,902,413.522,912,417.522,908,413.522" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="906" x2="1310" y1="413.522" y2="413.522"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="172" x="918" y="407.713">on_state_updated(NM_IDLE)</text><polygon fill="#A80036" points="129,494.3461,119,498.3461,129,502.3461,125,498.3461" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="123" x2="900" y1="498.3461" y2="498.3461"/><text fill="#000000" font-family="sans-serif" font-size="13" font-style="italic" lengthAdjust="spacing" textLength="141" x="135" y="439.419">ucl/by-unid/&lt;gw-node&gt;/</text><text fill="#000000" font-family="sans-serif" font-size="13" font-style="italic" lengthAdjust="spacing" textLength="107" x="135" y="457.125">ProtocolController/</text><text fill="#000000" font-family="sans-serif" font-size="13" font-style="italic" lengthAdjust="spacing" textLength="122" x="135" y="474.831">NetworkManagement</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="103" x="135" y="492.5371">{"State": "idle", ...}</text><!--MD5=[1a5b62e75e633e05022e131ae0caf034]
@startuml inline_umlgraph_7.svg
  box "MQTT Broker" #LightYellow
  participant MQTT
  end box
  box "ZPC" #LightBlue
  participant UclNodeState
  participant UclNetworkManagement
  participant NetworkManagement
  end box

  note over MQTT: User trigger Remove Offline Node
  MQTT                  -> UclNodeState         : <i>ucl/by-unid/<offline-node-unid>/State/Commands/OfflineRemove</i>\n"
  UclNodeState          -> UclNetworkManagement : ucl_network_management_remove_offline_node(node_id)
  UclNetworkManagement  -> NetworkManagement    : zwave_network_management_remove_failed(node_id)
  NetworkManagement     -> UclNetworkManagement : on_state_updated(NM_WAITING_FOR_FAILED_NODE_REMOVAL)
  UclNetworkManagement  -> MQTT                 : <i>ucl/by-unid/<gw-node>/</i>\n<i>ProtocolController/</i>\n<i>NetworkManagement</i>\n{"State": "remove node", ...}
  ... Waiting for offfline node to be removed ...
  NetworkManagement     -> UclNetworkManagement : on_state_updated(NM_IDLE)
  UclNetworkManagement  -> MQTT                 : <i>ucl/by-unid/<gw-node>/</i>\n<i>ProtocolController/</i>\n<i>NetworkManagement</i>\n{"State": "idle", ...}
@enduml

PlantUML version 1.2022.0(Tue Jan 11 17:16:42 CET 2022)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Default Encoding: UTF-8
Language: en
Country: US
--></g></svg>