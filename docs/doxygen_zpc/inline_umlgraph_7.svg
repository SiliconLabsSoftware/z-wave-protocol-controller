<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="537px" preserveAspectRatio="none" style="width:1384px;height:537px;background:#FFFFFF;" version="1.1" viewBox="0 0 1384 537" width="1384px" zoomAndPan="magnify"><defs><filter height="300%" id="f1vz58em2xs2ao" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><rect fill="#FFFFE0" height="525.05" style="stroke:#A80036;stroke-width:1.0;" width="88" x="71" y="6"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="82" x="74" y="18.077">MQTT Broker</text><rect fill="#ADD8E6" height="525.05" style="stroke:#A80036;stroke-width:1.0;" width="912.5" x="466" y="6"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="26" x="909.25" y="18.077">ZPC</text><line style="stroke:#A80036;stroke-width:1.0;" x1="114.5" x2="114.5" y1="61.3999" y2="329.2001"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:1.0,4.0;" x1="114.5" x2="114.5" y1="329.2001" y2="370.4"/><line style="stroke:#A80036;stroke-width:1.0;" x1="114.5" x2="114.5" y1="370.4" y2="492.2501"/><line style="stroke:#A80036;stroke-width:1.0;" x1="522" x2="522" y1="61.3999" y2="329.2001"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:1.0,4.0;" x1="522" x2="522" y1="329.2001" y2="370.4"/><line style="stroke:#A80036;stroke-width:1.0;" x1="522" x2="522" y1="370.4" y2="492.2501"/><line style="stroke:#A80036;stroke-width:1.0;" x1="877.5" x2="877.5" y1="61.3999" y2="329.2001"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:1.0,4.0;" x1="877.5" x2="877.5" y1="329.2001" y2="370.4"/><line style="stroke:#A80036;stroke-width:1.0;" x1="877.5" x2="877.5" y1="370.4" y2="492.2501"/><line style="stroke:#A80036;stroke-width:1.0;" x1="1297.5" x2="1297.5" y1="61.3999" y2="329.2001"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:1.0,4.0;" x1="1297.5" x2="1297.5" y1="329.2001" y2="370.4"/><line style="stroke:#A80036;stroke-width:1.0;" x1="1297.5" x2="1297.5" y1="370.4" y2="492.2501"/><rect fill="#FEFECE" filter="url(#f1vz58em2xs2ao)" height="30.7999" style="stroke:#A80036;stroke-width:1.5;" width="55" x="85.5" y="25.6"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="41" x="92.5" y="45.606">MQTT</text><rect fill="#FEFECE" filter="url(#f1vz58em2xs2ao)" height="30.7999" style="stroke:#A80036;stroke-width:1.5;" width="55" x="85.5" y="491.2501"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="41" x="92.5" y="511.256">MQTT</text><rect fill="#FEFECE" filter="url(#f1vz58em2xs2ao)" height="30.7999" style="stroke:#A80036;stroke-width:1.5;" width="101" x="470" y="25.6"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="87" x="477" y="45.606">UclNodeState</text><rect fill="#FEFECE" filter="url(#f1vz58em2xs2ao)" height="30.7999" style="stroke:#A80036;stroke-width:1.5;" width="101" x="470" y="491.2501"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="87" x="477" y="511.256">UclNodeState</text><rect fill="#FEFECE" filter="url(#f1vz58em2xs2ao)" height="30.7999" style="stroke:#A80036;stroke-width:1.5;" width="170" x="790.5" y="25.6"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="156" x="797.5" y="45.606">UclNetworkManagement</text><rect fill="#FEFECE" filter="url(#f1vz58em2xs2ao)" height="30.7999" style="stroke:#A80036;stroke-width:1.5;" width="170" x="790.5" y="491.2501"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="156" x="797.5" y="511.256">UclNetworkManagement</text><rect fill="#FEFECE" filter="url(#f1vz58em2xs2ao)" height="30.7999" style="stroke:#A80036;stroke-width:1.5;" width="150" x="1220.5" y="25.6"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="136" x="1227.5" y="45.606">NetworkManagement</text><rect fill="#FEFECE" filter="url(#f1vz58em2xs2ao)" height="30.7999" style="stroke:#A80036;stroke-width:1.5;" width="150" x="1220.5" y="491.2501"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="136" x="1227.5" y="511.256">NetworkManagement</text><path d="M5,76.3999 L5,101.3999 L221,101.3999 L221,86.3999 L211,76.3999 L5,76.3999 " fill="#FBFB77" filter="url(#f1vz58em2xs2ao)" style="stroke:#A80036;stroke-width:1.0;"/><path d="M211,76.3999 L211,86.3999 L221,86.3999 L211,76.3999 " fill="#FBFB77" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="195" x="11" y="93.477">User trigger Remove Offline Node</text><polygon fill="#A80036" points="510.5,146.15,520.5,150.15,510.5,154.15,514.5,150.15" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="115" x2="516.5" y1="150.15" y2="150.15"/><text fill="#000000" font-family="sans-serif" font-size="13" font-style="italic" lengthAdjust="spacing" textLength="373" x="122" y="129.3">ucl/by-unid/&lt;offline-node-unid&gt;/State/Commands/OfflineRemove</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="5" x="122" y="144.627">"</text><polygon fill="#A80036" points="865.5,175.75,875.5,179.75,865.5,183.75,869.5,179.75" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="522.5" x2="871.5" y1="179.75" y2="179.75"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="331" x="529.5" y="174.227">ucl_network_management_remove_offline_node(node_id)</text><polygon fill="#A80036" points="1285.5,205.35,1295.5,209.35,1285.5,213.35,1289.5,209.35" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="877.5" x2="1291.5" y1="209.35" y2="209.35"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="312" x="884.5" y="203.827">zwave_network_management_remove_failed(node_id)</text><polygon fill="#A80036" points="888.5,234.95,878.5,238.95,888.5,242.95,884.5,238.95" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="882.5" x2="1296.5" y1="238.95" y2="238.95"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="396" x="894.5" y="233.427">on_state_updated(NM_WAITING_FOR_FAILED_NODE_REMOVAL)</text><polygon fill="#A80036" points="126,317.2001,116,321.2001,126,325.2001,122,321.2001" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="120" x2="876.5" y1="321.2001" y2="321.2001"/><text fill="#000000" font-family="sans-serif" font-size="13" font-style="italic" lengthAdjust="spacing" textLength="135" x="132" y="265.25">ucl/by-unid/&lt;gw-node&gt;/</text><text fill="#000000" font-family="sans-serif" font-size="13" font-style="italic" lengthAdjust="spacing" textLength="107" x="132" y="282.8">ProtocolController/</text><text fill="#000000" font-family="sans-serif" font-size="13" font-style="italic" lengthAdjust="spacing" textLength="122" x="132" y="300.3501">NetworkManagement</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="162" x="132" y="315.6771">{"State": "remove node", ...}</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="185" x="613.75" y="353.419">Waiting for offfline node to be removed</text><polygon fill="#A80036" points="888.5,388,878.5,392,888.5,396,884.5,392" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="882.5" x2="1296.5" y1="392" y2="392"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="167" x="894.5" y="386.477">on_state_updated(NM_IDLE)</text><polygon fill="#A80036" points="126,470.2501,116,474.2501,126,478.2501,122,474.2501" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="120" x2="876.5" y1="474.2501" y2="474.2501"/><text fill="#000000" font-family="sans-serif" font-size="13" font-style="italic" lengthAdjust="spacing" textLength="135" x="132" y="418.3">ucl/by-unid/&lt;gw-node&gt;/</text><text fill="#000000" font-family="sans-serif" font-size="13" font-style="italic" lengthAdjust="spacing" textLength="107" x="132" y="435.85">ProtocolController/</text><text fill="#000000" font-family="sans-serif" font-size="13" font-style="italic" lengthAdjust="spacing" textLength="122" x="132" y="453.4">NetworkManagement</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="107" x="132" y="468.7271">{"State": "idle", ...}</text><!--MD5=[eaab7df64fa85cbf70b94dcaa5fab768]
@startuml inline_umlgraph_7.svg
  box "MQTT Broker" #LightYellow
  participant MQTT
  end box
  box "ZPC" #LightBlue
  participant UclNodeState
  participant UclNetworkManagement
  participant NetworkManagement
  end box

  note over MQTT: User trigger Remove Offline Node
  MQTT                  -> UclNodeState         : <i>ucl/by-unid/<offline-node-unid>/State/Commands/OfflineRemove</i>\n"
  UclNodeState          -> UclNetworkManagement : ucl_network_management_remove_offline_node(node_id)
  UclNetworkManagement  -> NetworkManagement    : zwave_network_management_remove_failed(node_id)
  NetworkManagement     -> UclNetworkManagement : on_state_updated(NM_WAITING_FOR_FAILED_NODE_REMOVAL)
  UclNetworkManagement  -> MQTT                 : <i>ucl/by-unid/<gw-node>/</i>\n<i>ProtocolController/</i>\n<i>NetworkManagement</i>\n{"State": "remove node", ...}
  ... Waiting for offfline node to be removed ...
  NetworkManagement     -> UclNetworkManagement : on_state_updated(NM_IDLE)
  UclNetworkManagement  -> MQTT                 : <i>ucl/by-unid/<gw-node>/</i>\n<i>ProtocolController/</i>\n<i>NetworkManagement</i>\n{"State": "idle", ...}
@enduml

PlantUML version 1.2022.0(Tue Jan 11 16:16:42 UTC 2022)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Default Encoding: ANSI_X3.4-1968
Language: en
Country: US
--></g></svg>