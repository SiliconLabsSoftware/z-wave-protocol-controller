// Multilevel Sensor Command Class
def zwTYPE          0x3102
def zwSCALE         0x3104
def zwVALUE         0x3105 // Value is int32 with 3 decimal points, i.e. 1000 means 1

// Atmospheric pressure
def SENSOR_TYPE_ATMOSPHERIC_PRESSURE        0x08
def SENSOR_SCALE_ATMOSPHERIC_PRESSURE_KPA   0

// Barometric pressure
def SENSOR_TYPE_BAROMETRIC_PRESSURE         0x09
def SENSOR_SCALE_BAROMETRIC_PRESSURE_KPA    0

// Water pressure
def SENSOR_TYPE_WATER_PRESSURE              0x39
def SENSOR_SCALE_WATER_PRESSURE_KPA         0

// Suction pressure
def SENSOR_TYPE_SUCTION_PRESSURE            0x4E
def SENSOR_SCALE_SUCTION_PRESSURE_KPA       0

// Discharge pressure
def SENSOR_TYPE_DISCHARGE_PRESSURE          0x4F
def SENSOR_SCALE_DISCHARGE_PRESSURE_KPA     0


// We apply mapping with the following priority:
// 1. Atmospheric pressure
// 2. Barometric pressure
// 3. Water pressure
// 4. Suction pressure
// 5. Discharge pressure

// ZCL attributes for PressureMeasurements. Values are in 10*kPa
def zbPRESSURE_MEASUREMENT_MEASURED_VALUE        0x04030000
def zbPRESSURE_MEASUREMENT_MIN_MEASURED_VALUE    0x04030001
def zbPRESSURE_MEASUREMENT_MAX_MEASURED_VALUE    0x04030002
def zbPRESSURE_MEASUREMENT_TOLERANCE             0x04030003
def zbPRESSURE_MEASUREMENT_SCALED_VALUE          0x04030010
def zbPRESSURE_MEASUREMENT_MIN_SCALED_VALUE      0x04030011
def zbPRESSURE_MEASUREMENT_MAX_SCALED_VALUE      0x04030012
def zbPRESSURE_MEASUREMENT_SCALED_TOLERANCE      0x04030013
def zbPRESSURE_MEASUREMENT_SCALE                 0x04030014

scope 0 {

  // ZPC stores (1000 * kPa) from Z-Wave, we need to indicate 10*kPa in ZCL, so we divide by 100
  r'zbPRESSURE_MEASUREMENT_MEASURED_VALUE =
    if (r'zwTYPE[SENSOR_TYPE_ATMOSPHERIC_PRESSURE].zwSCALE == SENSOR_SCALE_ATMOSPHERIC_PRESSURE_KPA) (r'zwTYPE[SENSOR_TYPE_ATMOSPHERIC_PRESSURE].zwVALUE / 10)
    if (r'zwTYPE[SENSOR_TYPE_BAROMETRIC_PRESSURE].zwSCALE == SENSOR_SCALE_BAROMETRIC_PRESSURE_KPA) (r'zwTYPE[SENSOR_TYPE_BAROMETRIC_PRESSURE].zwVALUE / 10)
    if (r'zwTYPE[SENSOR_TYPE_WATER_PRESSURE].zwSCALE == SENSOR_SCALE_WATER_PRESSURE_KPA) (r'zwTYPE[SENSOR_TYPE_WATER_PRESSURE].zwVALUE / 10)
    if (r'zwTYPE[SENSOR_TYPE_SUCTION_PRESSURE].zwSCALE == SENSOR_SCALE_SUCTION_PRESSURE_KPA) (r'zwTYPE[SENSOR_TYPE_SUCTION_PRESSURE].zwVALUE / 10)
    if (r'zwTYPE[SENSOR_TYPE_DISCHARGE_PRESSURE].zwSCALE == SENSOR_SCALE_DISCHARGE_PRESSURE_KPA) (r'zwTYPE[SENSOR_TYPE_DISCHARGE_PRESSURE].zwVALUE / 10)
    undefined

  r'zbPRESSURE_MEASUREMENT_MIN_MEASURED_VALUE =
    if (r'zbPRESSURE_MEASUREMENT_MEASURED_VALUE > r'zbPRESSURE_MEASUREMENT_MIN_MEASURED_VALUE) undefined r'zbPRESSURE_MEASUREMENT_MEASURED_VALUE

  r'zbPRESSURE_MEASUREMENT_MAX_MEASURED_VALUE =
    if (r'zbPRESSURE_MEASUREMENT_MEASURED_VALUE < r'zbPRESSURE_MEASUREMENT_MAX_MEASURED_VALUE) undefined r'zbPRESSURE_MEASUREMENT_MEASURED_VALUE

  // Let's say the tolerance is 10 ? Z-Wave devices do not provide this information
  r'zbPRESSURE_MEASUREMENT_TOLERANCE =
    if (e'zbPRESSURE_MEASUREMENT_MEASURED_VALUE) 10 undefined
}
