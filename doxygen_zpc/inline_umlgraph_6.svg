<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="567px" preserveAspectRatio="none" style="width:750px;height:567px;background:#FFFFFF;" version="1.1" viewBox="0 0 750 567" width="750px" zoomAndPan="magnify"><defs><filter height="300%" id="f6k5ri8h7r73c" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><rect fill="#FFFFE0" height="555.12" style="stroke:#A80036;stroke-width:1.0;" width="92" x="51" y="6"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="86" x="54" y="19.897">MQTT Broker</text><rect fill="#ADD8E6" height="555.12" style="stroke:#A80036;stroke-width:1.0;" width="544.5" x="199.5" y="6"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="24" x="459.75" y="19.897">ZPC</text><line style="stroke:#A80036;stroke-width:1.0;" x1="97" x2="97" y1="65.7739" y2="350.5401"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:1.0,4.0;" x1="97" x2="97" y1="350.5401" y2="393.522"/><line style="stroke:#A80036;stroke-width:1.0;" x1="97" x2="97" y1="393.522" y2="520.0521"/><line style="stroke:#A80036;stroke-width:1.0;" x1="295.5" x2="295.5" y1="65.7739" y2="350.5401"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:1.0,4.0;" x1="295.5" x2="295.5" y1="350.5401" y2="393.522"/><line style="stroke:#A80036;stroke-width:1.0;" x1="295.5" x2="295.5" y1="393.522" y2="520.0521"/><line style="stroke:#A80036;stroke-width:1.0;" x1="658" x2="658" y1="65.7739" y2="350.5401"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:1.0,4.0;" x1="658" x2="658" y1="350.5401" y2="393.522"/><line style="stroke:#A80036;stroke-width:1.0;" x1="658" x2="658" y1="393.522" y2="520.0521"/><rect fill="#FEFECE" filter="url(#f6k5ri8h7r73c)" height="33.0679" style="stroke:#A80036;stroke-width:1.5;" width="54" x="68" y="27.706"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="40" x="75" y="49.672">MQTT</text><rect fill="#FEFECE" filter="url(#f6k5ri8h7r73c)" height="33.0679" style="stroke:#A80036;stroke-width:1.5;" width="54" x="68" y="519.0521"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="40" x="75" y="541.018">MQTT</text><rect fill="#FEFECE" filter="url(#f6k5ri8h7r73c)" height="33.0679" style="stroke:#A80036;stroke-width:1.5;" width="181" x="203.5" y="27.706"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="167" x="210.5" y="49.672">UclNetworkManagement</text><rect fill="#FEFECE" filter="url(#f6k5ri8h7r73c)" height="33.0679" style="stroke:#A80036;stroke-width:1.5;" width="181" x="203.5" y="519.0521"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="167" x="210.5" y="541.018">UclNetworkManagement</text><rect fill="#FEFECE" filter="url(#f6k5ri8h7r73c)" height="33.0679" style="stroke:#A80036;stroke-width:1.5;" width="160" x="576" y="27.706"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="146" x="583" y="49.672">NetworkManagement</text><rect fill="#FEFECE" filter="url(#f6k5ri8h7r73c)" height="33.0679" style="stroke:#A80036;stroke-width:1.5;" width="160" x="576" y="519.0521"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="146" x="583" y="541.018">NetworkManagement</text><path d="M5,80.7739 L5,107.7739 L186,107.7739 L186,90.7739 L176,80.7739 L5,80.7739 " fill="#FBFB77" filter="url(#f6k5ri8h7r73c)" style="stroke:#A80036;stroke-width:1.0;"/><path d="M176,80.7739 L176,90.7739 L186,90.7739 L176,80.7739 " fill="#FBFB77" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="160" x="11" y="99.6709">User trigger Remove Node</text><polygon fill="#A80036" points="284,190.304,294,194.304,284,198.304,288,194.304" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="97" x2="290" y1="194.304" y2="194.304"/><text fill="#000000" font-family="sans-serif" font-size="13" font-style="italic" lengthAdjust="spacing" textLength="141" x="104" y="135.377">ucl/by-unid/&lt;gw-node&gt;/</text><text fill="#000000" font-family="sans-serif" font-size="13" font-style="italic" lengthAdjust="spacing" textLength="107" x="104" y="153.083">ProtocolController/</text><text fill="#000000" font-family="sans-serif" font-size="13" font-style="italic" lengthAdjust="spacing" textLength="156" x="104" y="170.789">NetworkManagement/Write</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="162" x="104" y="188.495">{"State": "remove node", ...}</text><polygon fill="#A80036" points="646,222.01,656,226.01,646,230.01,650,226.01" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="296" x2="652" y1="226.01" y2="226.01"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="277" x="303" y="220.201">zwave_network_management_remove_node()</text><polygon fill="#A80036" points="307,253.716,297,257.716,307,261.716,303,257.716" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="301" x2="657" y1="257.716" y2="257.716"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="338" x="313" y="251.907">on_state_updated(NM_WAITING_FOR_NODE_REMOVAL)</text><polygon fill="#A80036" points="108,338.5401,98,342.5401,108,346.5401,104,342.5401" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="102" x2="295" y1="342.5401" y2="342.5401"/><text fill="#000000" font-family="sans-serif" font-size="13" font-style="italic" lengthAdjust="spacing" textLength="141" x="114" y="283.6131">ucl/by-unid/&lt;gw-node&gt;/</text><text fill="#000000" font-family="sans-serif" font-size="13" font-style="italic" lengthAdjust="spacing" textLength="107" x="114" y="301.3191">ProtocolController/</text><text fill="#000000" font-family="sans-serif" font-size="13" font-style="italic" lengthAdjust="spacing" textLength="122" x="114" y="319.0251">NetworkManagement</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="162" x="114" y="336.7311">{"State": "remove node", ...}</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="169" x="293" y="376.299">Waiting for node to be removed</text><polygon fill="#A80036" points="307,413.228,297,417.228,307,421.228,303,417.228" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="301" x2="657" y1="417.228" y2="417.228"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="172" x="313" y="411.419">on_state_updated(NM_IDLE)</text><polygon fill="#A80036" points="108,498.0521,98,502.0521,108,506.0521,104,502.0521" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="102" x2="295" y1="502.0521" y2="502.0521"/><text fill="#000000" font-family="sans-serif" font-size="13" font-style="italic" lengthAdjust="spacing" textLength="141" x="114" y="443.125">ucl/by-unid/&lt;gw-node&gt;/</text><text fill="#000000" font-family="sans-serif" font-size="13" font-style="italic" lengthAdjust="spacing" textLength="107" x="114" y="460.831">ProtocolController/</text><text fill="#000000" font-family="sans-serif" font-size="13" font-style="italic" lengthAdjust="spacing" textLength="122" x="114" y="478.5371">NetworkManagement</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="103" x="114" y="496.2431">{"State": "idle", ...}</text><!--MD5=[813311c1ac704593747b592675c676dc]
@startuml inline_umlgraph_6.svg
  box "MQTT Broker" #LightYellow
  participant MQTT
  end box
  box "ZPC" #LightBlue
  participant UclNetworkManagement
  participant NetworkManagement
  end box

  note over MQTT: User trigger Remove Node
  MQTT                  -> UclNetworkManagement : <i>ucl/by-unid/<gw-node>/</i>\n<i>ProtocolController/</i>\n<i>NetworkManagement/Write</i>\n{"State": "remove node", ...}
  UclNetworkManagement  -> NetworkManagement    : zwave_network_management_remove_node()
  NetworkManagement     -> UclNetworkManagement : on_state_updated(NM_WAITING_FOR_NODE_REMOVAL)
  UclNetworkManagement  -> MQTT                 : <i>ucl/by-unid/<gw-node>/</i>\n<i>ProtocolController/</i>\n<i>NetworkManagement</i>\n{"State": "remove node", ...}
  ... Waiting for node to be removed ...
  NetworkManagement     -> UclNetworkManagement : on_state_updated(NM_IDLE)
  UclNetworkManagement  -> MQTT                 : <i>ucl/by-unid/<gw-node>/</i>\n<i>ProtocolController/</i>\n<i>NetworkManagement</i>\n{"State": "idle", ...}
@enduml

PlantUML version 1.2022.0(Tue Jan 11 17:16:42 CET 2022)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Default Encoding: UTF-8
Language: en
Country: US
--></g></svg>